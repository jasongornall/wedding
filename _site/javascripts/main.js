// Generated by CoffeeScript 1.8.0
var handleLink, handlePath, route_url;

handleLink = function() {
  return $('a').off('click').on('click', function(e) {
    var $el, href, path;
    $el = $(e.currentTarget);
    href = $el.attr('href');
    if (href[0] !== '/') {
      return;
    }
    e.preventDefault();
    path = url('path', href);
    route_url(path || '/');
    return false;
  });
};

handlePath = function(path, $base_el) {
  var $el, $spans;
  switch (path) {
    case '/':
      $el = $base_el.find('.rewrite');
      $base_el.find('.additions').remove;
      $el.lettering();
      $spans = $el.find('> span');
      return async.eachLimit($spans, 4, (function(char, next) {
        var $char, x, y;
        $char = $(char);
        x = Math.random() * 700 - 350;
        y = Math.random() * 700 - 350;
        $char.attr({
          'style': "transform: translate(" + x + "px, " + y + "px);"
        });
        return setTimeout((function() {
          $char.addClass('show');
          return next();
        }), 400);
      }), function() {
        var $sub;
        $sub = $('<span class = "additions"> Welcome to Our Wedding Website </span>');
        $sub.hide();
        $base_el.append($sub);
        return setTimeout((function() {
          return $sub.fadeIn();
        }), 1000);
      });
  }
};

route_url = function(path) {
  var $el, $link, data, new_path;
  $('#body').attr('class', '');
  path = path || url('path');
  data = path.split('/');
  history.replaceState(null, null, path);
  new_path = "/" + (data[1] || '');
  $("[data-route]").hide();
  $el = $("[data-route='" + new_path + "']");
  handlePath(new_path, $el);
  $el.fadeIn();
  $link = $("#navigation a[href='" + new_path + "']");
  $link.addClass('active');
  return $link.siblings().removeClass('active');
};

route_url();

handleLink();
